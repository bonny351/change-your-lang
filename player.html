<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Now Playing</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#050f14;
  font-family:"Segoe UI",system-ui,sans-serif;
  color:white;
  overflow:hidden;
}

/* ===== BACKGROUND ===== */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at bottom, rgba(0,120,255,.35), transparent 55%),
    radial-gradient(circle at top, rgba(0,255,200,.25), transparent 60%),
    linear-gradient(#020b14,#061a24);
  z-index:0;
}

/* ===== GRAIN ===== */
body::after{
  content:"";
  position:fixed;
  inset:0;
  background:url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'>\
<filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9'/></filter>\
<rect width='120' height='120' filter='url(%23n)' opacity='.035'/>\
</svg>");
  pointer-events:none;
  z-index:4;
}

/* ===== WAVES ===== */
#waves{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1;
}

/* ===== MAIN ===== */
#player{
  position:relative;
  z-index:2;
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

h1{
  font-size:36px;
  margin-bottom:15px;
}

#songTitle{
  font-size:28px;
  opacity:.9;
}

/* ===== CONTROLS ===== */
#controls{
  margin:30px 0;
  display:flex;
  gap:25px;
  align-items:center;
}

.btn{
  width:80px;
  height:80px;
  border-radius:50%;
  background:radial-gradient(circle,#3cffb4,#0a4f3a);
  box-shadow:0 0 35px #3cffb4;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:32px;
  cursor:pointer;
  user-select:none;
}

.btn:active{transform:scale(.9)}

input[type=range]{
  width:200px;
}

/* ===== PLAYLIST ===== */
#playlist{
  width:60%;
  max-height:260px;
  overflow-y:auto;
  margin-top:20px;
  padding:15px;
  background:rgba(0,0,0,.35);
  border-radius:15px;
}

.song{
  padding:12px;
  border-bottom:1px solid rgba(255,255,255,.1);
  cursor:pointer;
}
.song:hover{
  background:rgba(255,255,255,.08);
}

/* ===== FOOTER ===== */
#footer{
  position:absolute;
  bottom:25px;
  display:flex;
  gap:25px;
}

.footerBtn{
  padding:14px 28px;
  border-radius:20px;
  background:rgba(0,255,200,.15);
  box-shadow:0 0 25px rgba(0,255,200,.5);
  cursor:pointer;
}
.footerBtn:active{transform:scale(.95)}
</style>
</head>

<body>

<canvas id="waves"></canvas>

<div id="player">
  <h1 id="profileName">Now Playing</h1>
  <div id="songTitle">Select a song</div>

  <div id="controls">
    <div class="btn" onclick="prev()">⏮</div>
    <div class="btn" onclick="toggle()">▶</div>
    <div class="btn" onclick="next()">⏭</div>
  </div>

  <input type="range" min="0" max="1" step="0.01" onchange="setVol(this.value)">

  <div id="playlist"></div>

  <div id="footer">
    <div class="footerBtn" onclick="back()">Back to Profiles</div>
  </div>
</div>

<audio id="audio"></audio>

<script>
/* ===== PROFILE NAME ===== */
const params = new URLSearchParams(location.search);
const profile = params.get("profile") || "Profile";
document.getElementById("profileName").textContent =
  "Now Playing for " + profile;

/* ===== DEMO SONGS (REPLACE WITH YOUR MP3 PATHS) ===== */
const songs=[
  {title:"Chill Vibes", file:"music/chill.mp3"},
  {title:"Night Drive", file:"music/night.mp3"},
  {title:"Ocean Dreams", file:"music/ocean.mp3"},
  {title:"Relaxed Mood", file:"music/relax.mp3"}
];

let index=0;
const audio=document.getElementById("audio");

/* ===== LOAD PLAYLIST ===== */
const list=document.getElementById("playlist");
songs.forEach((s,i)=>{
  const d=document.createElement("div");
  d.className="song";
  d.textContent=s.title;
  d.onclick=()=>play(i);
  list.appendChild(d);
});

function play(i){
  index=i;
  audio.src=songs[i].file;
  audio.play();
  document.getElementById("songTitle").textContent=songs[i].title;
}

function toggle(){
  if(audio.paused) audio.play();
  else audio.pause();
}
function next(){ play((index+1)%songs.length) }
function prev(){ play((index-1+songs.length)%songs.length) }
function setVol(v){ audio.volume=v }
function back(){ location.href="index.html" }

/* ===== WAVES ===== */
const c=document.getElementById("waves");
const ctx=c.getContext("2d");

function resize(){
  c.width=innerWidth;
  c.height=innerHeight;
}
resize();
addEventListener("resize",resize);

let t=0;
function draw(){
  ctx.clearRect(0,0,c.width,c.height);
  for(let layer=0;layer<3;layer++){
    ctx.beginPath();
    const amp=30+layer*12;
    for(let x=0;x<=c.width;x+=6){
      ctx.lineTo(
        x,
        c.height*0.55+
        Math.sin(x/140+t+layer)*amp
      );
    }
    ctx.strokeStyle=`rgba(80,200,255,${0.25-layer*0.07})`;
    ctx.lineWidth=3-layer*0.6;
    ctx.shadowBlur=20;
    ctx.shadowColor="#4cffc3";
    ctx.stroke();
  }
  t+=0.02;
  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
